define(["jquery"],(function(e){var t={hamburger_container:".menu-hamburger",header_bar:"#header-bar",header_bar_container:".header-bar-container",header_bar_mobile_container:".header-bar-mobile-bottom-container",menu_container:".menu-bar-container",menu_inner_container:".menu-bar",mobile_menu_container:".mobile-menu-bar-container",menu_items_container:".menu-bar li",content_container:".content.layout-container",content_end_container:".end-content",mobile_menu_mover_elems:"body, #header-bar",no_use_menu_touch_on:".no-use-menu-touch",position:0,m_height:0,mobile_m_width:0,mobile_m_height:0,mobile_m_y:0,header_bar_height:0,w_height:0,w_width:0,x_touch:null,y_touch:null,auto_scroll_after_touch:null,start_touch_time:null,average_touch_time:null,content_margin_top:0,mobile:!1,mobile_menu_is_opened:!1,menu_obj:void 0,mobile_menu_obj:void 0,hamburger_obj:void 0,transform_support:!1,fixed_header:!1,click_counter:0,click_timer:!1,init:function(){t.mobilecheck(),onResourcesAndDOMReady((function(){if(t.menu_obj=e(t.menu_container).eq(0),t.mobile_menu_obj=e(t.mobile_menu_container).eq(0),!e(t.menu_obj).length&&!e(t.mobile_menu_obj).length)return!1;t.hamburger_obj=e(t.hamburger_container),t.position=e(t.menu_obj).offset(),t.w_height=parseInt(window.innerHeight),t.w_width=parseInt(window.innerWidth),e(t.menu_obj).get(0)&&(t.m_height=parseInt(e(t.menu_obj).get(0).offsetHeight)),e(t.header_bar_container).get(0)&&(t.header_bar_height=parseInt(e(t.header_bar_container).get(0).offsetHeight)),e(t.mobile_menu_obj).get(0)&&(t.mobile_m_width=parseInt(e(t.mobile_menu_obj).get(0).offsetWidth)),e(".mobile-menu-bar",t.mobile_menu_obj).get(0)&&(t.mobile_m_height=parseInt(e(".mobile-menu-bar",t.mobile_menu_obj).get(0).offsetHeight)),t.content_margin_top=parseInt(e(t.content_container).css("margin-top")),e(t.menu_container).height(t.m_height),e(t.header_bar).hasClass("fixed")&&(t.fixed_header=!0),e(t.hamburger_obj).hasClass("hidden")||e(t.header_bar).addClass("no-desktop-menu"),t.checkTransformSupport(),t.transform_support||e(t.mobile_menu_obj).css({left:"-100%"}),e("li.toggle",t.mobile_menu_obj).each((function(t,n){e(n).hasClass("active")&&"UL"===e(n).next().prop("tagName")&&e(n).next().is(":visible")?e(n).next().removeClass("toggle"):e(n).addClass("ajax")})),t.onScroll(),t.addEventListener(window,"resize",t.onResize),e(window).on("scroll mousewheel DOMMouseScroll",t.onScroll),e(t.hamburger_obj).on("click",t.hamburgerClick),e(document.body).on("click",t.bodyClick),e(document.body).on("click",t.menu_items_container+".ajax",t.ajaxLoadSubMenu),e(document.body).on("click",t.menu_items_container+":not(.ajax)",t.itemClick),t.addEventListener(document,"touchstart",t.touchStart,{passive:!1}),t.addEventListener(document,"touchmove",t.touchMove,{passive:!1}),t.addEventListener(document,"touchend",t.touchEnd,{passive:!1})}))},onScroll:function(n){if(void 0===n||!0!==t.mobile_menu_is_opened||e(t.mobile_menu_obj).find(n.target).length||e(t.hamburger_obj).find(n.target).length){var o=0,i="msie"==e.browser&&e.browser.version<7,a=e(t.content_end_container).eq(0).offset();if(!i&&e(t.menu_obj).length&&null!=typeof a&&!0!==t.mobile){var r=e(window).scrollTop();t.m_height>t.w_height?(r<t.m_height-t.w_height+t.position.top?o+=r:o+=t.m_height-t.w_height+t.position.top,r+t.w_height>a.top&&(o+=r+t.w_height-a.top)):r+t.m_height+t.position.top>a.top&&(o+=r+t.m_height+t.position.top-a.top),o=-(o-=t.content_margin_top),e(t.menu_inner_container,t.menu_obj).css("position","fixed").css("top",o+"px")}}else t.preventDefault(n)},onResize:function(){t.content_margin_top=parseInt(e(t.content_container).css("margin-top")),t.position=e(t.menu_obj).offset(),t.w_height=parseInt(window.innerHeight),t.w_width=parseInt(window.innerWidth),t.header_bar_height=parseInt(e(t.header_bar_container).outerHeight()),t.mobile_menu_is_opened&&e(t.header_bar).width(t.w_width+"px"),t.mobile_menu_is_opened&&!e(t.hamburger_obj).is(":visible")&&t.closeMobileMenu(),t.onScroll()},bodyClick:function(n){!0!==t.mobile_menu_is_opened||e(t.mobile_menu_obj).find(n.target).length||e(t.hamburger_obj).find(n.target).length||t.closeMobileMenu()},itemClick:function(n){var o=this,i=1;if(n.preventDefault(),e("a",o).length&&(i=2),t.click_counter++,1===t.click_counter&&(n.preventDefault(),t.click_timer=setTimeout((function(){clearTimeout(t.click_timer),t.click_counter=0;var o=e(n.target).attr("href");void 0!==o&&(window.location.href=o)}),300)),t.click_counter==i&&"UL"==e(o).next().prop("tagName")&&e(o).next().hasClass("toggle")){if(n.preventDefault(),clearTimeout(t.click_timer),t.click_counter=0,e(o).hasClass("active"))e(o).next().slideToggle({duration:"fast",complete:function(){e(t.mobile_menu_obj).find(n.target).length?t.mobile_m_height=e(".mobile-menu-bar",t.mobile_menu_obj).outerHeight():(t.m_height=e(t.menu_inner_container,t.menu_obj).outerHeight(),e(t.menu_container).height(t.m_height),e(t.menu_inner_container,t.menu_obj).addClass("transition"),t.onScroll(),setTimeout((function(){e(t.menu_inner_container,t.menu_obj).removeClass("transition")}),400))}});else{var a=e(o).next().parent();e("> li",a).removeClass("active"),e("> ul.toggle",a).slideUp("fast"),e(o).addClass("active"),e(o).next().find(".active").parent().show(),e(o).next().slideDown({duration:"fast",complete:function(){e(t.mobile_menu_obj).find(n.target).length?t.mobile_m_height=e(".mobile-menu-bar",t.mobile_menu_obj).outerHeight():(t.m_height=e(t.menu_inner_container,t.menu_obj).outerHeight(),e(t.menu_container).height(t.m_height),e(t.menu_inner_container,t.menu_obj).addClass("transition"),t.onScroll(),setTimeout((function(){e(t.menu_inner_container,t.menu_obj).removeClass("transition")}),400),elementInViewport(e(o).get(0))||e("html, body").animate({scrollTop:e(o).offset().top-100},300))}})}return!1}},ajaxLoadSubMenu:function(t){var n=this,o=1,i=parseInt(e("a",n).attr("data")),a=0;if("UL"===e(n).next().prop("tagName"))return e(n).removeClass("ajax"),e(n).next().addClass("toggle"),e(n).click(),e(n).next().removeClass("toggle"),e("li",e(n).next("ul")).each((function(t,n){e("a",n).length&&e(n).addClass("ajax")})),!1;for(var r=e(n).parents("ul").attr("class").split(" "),m=0;m<r.length;m++)2===r[m].length&&-1!==r[m].indexOf("l")&&(o=parseInt(r[m].replace(/\D/g,"")))<1&&(o=1);var l=e(n).parents("ul").prev();return o>2?(i=0,a=0):2===o&&i>0&&e(l).length&&"LI"===e(l).prop("tagName")&&"undefined"!==e("a",l).attr("data")&&(a=i,i=parseInt(e("a",l).attr("data"))),e("a",n).append('<div class="circle-preloader"></div>'),e.ajax({url:"ajax_content.php",method:"post",data:"action=get_menu_level2&level="+o+"&channel="+i+"&subchannel="+a,dataType:"html",success:function(t){void 0!==t&&t.length?(e(n).removeClass("ajax").after(t),e(n).next("ul").addClass("toggle"),e(n).click(),e(n).next("ul").removeClass("toggle"),e(".circle-preloader",n).remove(),e("li",e(n).next("ul")).each((function(t,n){e("a",n).length&&e(n).addClass("ajax")}))):window.location=e("a",n).attr("href")}}),!1},touchStart:function(n){!0!==t.mobile_menu_is_opened||e(t.mobile_menu_obj).find(n.target).length||e(t.hamburger_obj).find(n.target).length||t.closeMobileMenu(),t.start_touch_time=new Date,t.auto_scroll_after_touch=!0,t.x_touch=n.touches[0].clientX,t.y_touch=n.touches[0].clientY},touchEnd:function(n){e(t.no_use_menu_touch_on).find(n.target).length||((new Date-t.start_touch_time)/1e3>.03&&(t.auto_scroll_after_touch=!1),e(t.mobile_menu_obj).find(n.target).length&&(t.mobile_m_y=t.getMoveY(n.changedTouches[0].clientY),e(".mobile-menu-bar",t.mobile_menu_obj).css({transform:"translate(0px, "+-1*t.mobile_m_y+"px) translateZ(0px)"})),t.x_touch=null,t.y_touch=null)},touchMove:function(n){if(!e(t.no_use_menu_touch_on).find(n.target).length&&(!0===t.mobile_menu_is_opened&&void 0!==n&&t.preventDefault(n),t.x_touch&&t.y_touch)){var o=n.touches[0].clientX,i=n.touches[0].clientY,a=t.x_touch-o,r=t.y_touch-i,m=(new Date-t.start_touch_time)/1e3;if(t.start_touch_time=new Date,m>.03&&(t.auto_scroll_after_touch=!1),Math.abs(a)>Math.abs(r))a>50&&t.mobile_menu_is_opened?t.closeMobileMenu():a<-50&&!t.mobile_menu_is_opened&&t.openMobileMenu();else{var l=t.mobile_m_y+r;l<0&&(l=0),l*=-1,e(".mobile-menu-bar",t.mobile_menu_obj).css({transform:"translate(0px, "+l+"px) translateZ(0px)"})}}},getMoveY:function(n){var o=t.mobile_m_y+t.y_touch-n;return o<0||t.mobile_m_height+t.header_bar_height-window.innerHeight<0?o=0:o>t.mobile_m_height+t.header_bar_height-window.innerHeight&&(o=t.mobile_m_height+t.header_bar_height-window.innerHeight),t.auto_scroll_after_touch&&(t.y_touch-n>20||t.y_touch-n<-20)?(t.y_touch-n<-20?o=0:t.y_touch-n>20&&(o=t.mobile_m_height+t.header_bar_height-window.innerHeight),e(".mobile-menu-bar",t.mobile_menu_obj).css({"transition-duration":"0.6s"})):o>t.mobile_m_height+t.header_bar_height-window.innerHeight?e(".mobile-menu-bar",t.mobile_menu_obj).css({"transition-duration":"0.6s"}):e(".mobile-menu-bar",t.mobile_menu_obj).css({"transition-duration":"0.1s"}),o},hamburgerClick:function(){t.mobile_menu_is_opened?t.closeMobileMenu():t.openMobileMenu()},openMobileMenu:function(){e(".popup_overlay").show(),t.fixed_header&&e(t.header_bar).removeClass("fixed").addClass("tmp-no-fixed"),e(t.mobile_menu_obj).css({top:t.header_bar_height+"px"}),e(t.mobile_menu_obj).removeClass("mobile-menu-bar-container-d-none"),setTimeout((function(){t.transform_support?(e(t.mobile_menu_obj).css({"-webkit-transform":"translateX(0)",transform:"translateX(0)"}),t.mobile?(e(".mobile-menu-bar",t.mobile_menu_obj).css({"transition-duration":"0s",transform:"translate(0px, 0px) translateZ(0px)","transition-timing-function":"cubic-bezier(0.1, 0.57, 0.1, 1)"}),e(t.mobile_menu_obj).css({"overflow-y":"hidden"})):e(t.mobile_menu_obj).css({"overflow-y":"auto"})):e(t.mobile_menu_obj).css({left:"0px","overflow-y":"hidden"}),e(t.mobile_menu_obj).addClass("open"),e(t.header_bar).width(t.w_width+"px"),e(t.hamburger_obj).addClass("active"),t.mobile_menu_is_opened=!0}))},closeMobileMenu:function(){t.fixed_header&&e(t.header_bar).addClass("fixed").removeClass("tmp-no-fixed"),t.transform_support?e(t.mobile_menu_obj).css({"-webkit-transform":"translateX(-100%)",transform:"translateX(-100%)"}):e(t.mobile_menu_obj).css({left:-t.mobile_m_width+"px"}),e(t.mobile_menu_obj).removeClass("open"),e(t.header_bar).width("initial"),e(t.hamburger_obj).removeClass("active"),e(".popup_overlay").hide(),t.mobile_menu_is_opened=!1},mobilecheck:function(){var e;e=navigator.userAgent||navigator.vendor||window.opera,(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t.mobile=!0)},preventDefault:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1},preventDefaultForScrollKeys:function(e){if({37:1,38:1,39:1,40:1}[e.keyCode])return t.preventDefault(e),!1},checkTransformSupport:function(){var e=document.documentElement.style;("Transform"in e||"WebkitTransform"in e||"msTransform"in e)&&(t.transform_support=!0)},addEventListener:function(e,t,n,o){void 0!==typeof e&&null!=e&&e.addEventListener?e.addEventListener(t,n,o):void 0!==typeof e&&null!=e&&e.attachEvent&&e.attachEvent("on"+t,n)}};return{create:function(){return new t.init}}}));